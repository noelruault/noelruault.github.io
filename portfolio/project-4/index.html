<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Go News Http Service</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Simple HTTP service that fetches information from multiple external providers in an efficient way.">
  <meta name="author" content="Noel Ruault">
  <meta name="generator" content="Hugo 0.104.3" />

  <style>
    :root{
      --primary-color:#366969;
      --logo-font-size:40px;
    }
  </style>

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://noel.engineer/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://noel.engineer/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://noel.engineer/plugins/themify-icons/themify-icons.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://noel.engineer/css/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://noel.engineer/images/favicon.ico " type="image/x-icon">
  <link rel="icon" href="https://noel.engineer/images/favicon.ico " type="image/x-icon">

  
	<!-- Global Site Tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-E0SG7RR73Y"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-E0SG7RR73Y');
	</script>
	

  <!-- OpenGraph meta (alters social media link metadata) -->
  <meta property="og:title" content="Hello, I'm NoÃ«l. I write code because I love to." name="title" />
  <meta property="og:image" content="https://noel.engineer/images/meta/og-image.png " name="image" />
  <meta property="og:description" content="Software engineer in all its amplitude. Backend partisan, Unix enthusiast, MacOs user. Always positive, eager, proactive and passionate. Skilled in agile methodologies and team procedures. Determined to achieve success." name="description" />

</head>
<body>
<!-- preloader start -->
<div class="preloader">
  <div id="bounce" alt="preloader"></div>
</div>
<!-- preloader end -->

<header class="navigation nav-fixed-top">
  <nav class="navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand" href="https://noel.engineer/">
      
      <h3 class="text-white font-tertiary">noel ruault<span id="cursor">|</span></h3>
      
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
      aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navigation">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://noel.engineer/"> Home </a>
        </li>
        
        
        
        
        
        <li class="nav-item ">
          <a class="nav-link" href="https://noel.engineer/about">About</a>
        </li>
        
        
        
        
        
        <li class="nav-item ">
          <a class="nav-link" href="https://noel.engineer/portfolio">Portfolio</a>
        </li>
        
        
        
        
        
        <li class="nav-item ">
          <a class="nav-link" href="https://noel.engineer/contact">Contact</a>
        </li>
        
        
      </ul>
    </div>
  </nav>
</header>


<script>
  var cursor = true;
  var speed = 550;
  setInterval(() => {
    if (cursor) {
      document.getElementById('cursor').style.opacity = 0;
      cursor = false;
    } else {
      document.getElementById('cursor').style.opacity = 1;
      cursor = true;
    }
  }, speed);
</script>




<section class="page-title bg-primary position-relative overflow-hidden">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <h1 class="text-white font-tertiary">Go News Http Service</h1>
      </div>
    </div>
  </div>
  
  <img src="/images/illustrations/page-title.png" alt="illustrations" class="bg-shape-1 w-100">
  <img src="/images/illustrations/keycap-n-for-noel.svg" alt="illustrations" class="bg-shape-2">
  <img src="/images/illustrations/dots-cyan.svg" alt="illustrations" class="bg-shape-3">
  <img src="/images/illustrations/brackets.svg" alt="illustrations" class="bg-shape-4">
  <img src="/images/illustrations/console.svg" alt="illustrations" class="bg-shape-5">
  <img src="/images/illustrations/dots-group-cyan.svg" alt="illustrations" class="bg-shape-6">
  
</section>




<section class="section portfolio-section">
  <div class="container">
    <div class="row">
      <div class="col-lg-5 mb-5">
        <img src="https://noel.engineer/images/portfolio/cover-7.png" class="img-fluid w-100" alt="Go News Http Service">
      </div>
      <div class="col-lg-7 mb-5 mb-lg-0 align-self-center">
        <div class="row mx-0">
          
          <div class="col-sm-6 mb-5">
            <div class="project-meta">
              <i class="ti-calendar"></i>
              <div class="ml-3">
                <h4>Creation date</h4>
                <p>Oct 04, 2021</p>
              </div>
            </div>
          </div>
          
          
          <div class="col-sm-6 mb-5">
            <div class="project-meta">
              <i class="ti-folder"></i>
              <div class="ml-3">
                <h4>Categories</h4>
                <p>Api, Golang, Portfolio</p>
              </div>
            </div>
          </div>
          
          <div class="col-sm-6 mb-5">
            <div class="project-meta">
              <i class="ti-link"></i>
              <div class="ml-3">
                <h4>Project Link</h4>
                <p><a href="https://github.com/archived-code-challenges/news-service">https://github.com/archived-code-challenges/news-service</a></p>
              </div>
            </div>
          </div>
          
        </div>
      </div>
      <div class="col-lg-11">
        <div class="content"><h1 id="golang-coding-challenge">Golang Coding challenge</h1>
<p>The dev team created this coding challenge to help assess your coding and problem-solving skills. Along with this file, you should find an archive with the code of the project to complete.</p>
<h2 id="the-project">The Project</h2>
<p>The project contains a simple HTTP service that simulates a news API.</p>
<h3 id="content">Content</h3>
<ul>
<li>The content itself is fetched from multiple providers (those could be 3rd party APIs, internal services, or database connections).</li>
<li>Content providers are represented by the <code>Provider</code> type. And the API has a mapping between providers and <code>Clients</code>, which are used to fetch content.</li>
</ul>
<h3 id="content-configuration">Content configuration</h3>
<ul>
<li>The API has set a configuration, which represents the repeating sequence of providers to use.
If the sequence is <code>[Provider1, Provider2, Provider3]</code> and the user requests five (5) articles, the response should contain items from <code>[Provider1, Provider2, Provider3, Provider1, Provider2]</code> in that order.</li>
</ul>
<p>In addition,</p>
<ul>
<li>If a provider fails to deliver content, the configuration might contain a fallback to use instead.</li>
<li>If both, the main provider and the fallback fail (or if the main provider fails and there is no fallback), the API should respond with all the items before that point. So, for example, if the configuration calls for <code>[1,1,2,3]</code> and <code>2</code> fails, the response should only contain <code>[1,1]</code>.</li>
</ul>
<h2 id="the-interface">The Interface</h2>
<p>The API responds to GET requests with 2 URL parameters:</p>
<ul>
<li><code>count</code> represents the number of items desired</li>
<li><code>offset</code> represents the number of items previously requested. The configuration should be offset by this number.</li>
</ul>
<p>The expected response is a list of content items, each one being a JSON representation of the <code>ContentItem</code> struct, found in <code>content.go</code></p>
<p>Example request/response:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>    Request:
</span></span><span style="display:flex;"><span>    http &#39;127.0.0.1:8080/?count=3&amp;offset=10&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Response:
</span></span><span style="display:flex;"><span>    HTTP/1.1 200 OK
</span></span><span style="display:flex;"><span>    Content-Length: 385
</span></span><span style="display:flex;"><span>    Content-Type: application/json
</span></span><span style="display:flex;"><span>    Date: Thu, 24 Sep 2020 10:47:11 GMT
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;expiry&#34;</span>: <span style="color:#e6db74">&#34;2020-09-24T11:47:11.204318471+01:00&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;5577006791947779410&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;link&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;source&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;summary&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;title&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;expiry&#34;</span>: <span style="color:#e6db74">&#34;2020-09-24T11:47:11.204324536+01:00&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;8674665223082153551&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;link&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;source&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;summary&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;title&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;expiry&#34;</span>: <span style="color:#e6db74">&#34;2020-09-24T11:47:11.204326896+01:00&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;6129484611666145821&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;link&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;source&#34;</span>: <span style="color:#e6db74">&#34;2&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;summary&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;title&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h2 id="instructions">Instructions</h2>
<ol>
<li>Complete the <code>ServeHTTP</code> method in <code>server.go</code> in accordance with the specifications above.</li>
<li>Run existing tests, and make sure they all pass.</li>
<li>Add some tests to catch missing edge cases. For example, check that fallbacks are handled.</li>
</ol>
<p>Hints:</p>
<ul>
<li>You can run the server simply with <code>go run .</code> in the projects directory.</li>
<li>Tests are run with <code>go test</code> in the current directory.</li>
<li>Try to keep to the standard library as much as possible</li>
<li>Latency is crucial for this application, so fetching the items sequentially one at a time might not be good enough</li>
</ul>
<h2 id="decisions-taken-on-the-implementation">Decisions taken on the implementation</h2>
<ul>
<li>For the sake of simplicity, I coded a <a href="sever_test.go#L33">simple test</a> that works with the given implementation, but there is another <a href="sever_test.go#L260">test that would work if external dependencies</a> were added.</li>
<li>When testing, I&rsquo;ve decided to mock <code>rand.Int</code> and <code>time.Now</code> packages creating a <a href="content.go#L9">global variable</a> rather than (for example) extend <code>SampleContentProvider</code> to take a <code>now</code> <code>func() time.Time</code>.</li>
<li>I&rsquo;ve created a <a href="server.go#L13">custom error struct</a> to return a formatted error on the response.</li>
<li>I&rsquo;ve used a helper function <a href="response.go#L212">(<code>Respond</code>) to return a unified response</a>.</li>
<li>Added <a href="golangci.yml">golangci.yml</a> for the CI/CD to catch errors for me but also to be independent from the IDE. In addition, would help other people to follow same linter rules.</li>
</ul>
<h2 id="querying-the-service">Querying the service</h2>
<p>The application is tested by <code>server_test.go</code> file, but you can query the running service by running:</p>
<p><code>curl &quot;http://localhost:8080/?count=8&quot; | jq</code></p>
<p>Expected result sources: <code>1 1 2 3 1 1 1 2</code> given <a href="config.go#L39">default config</a></p>
<p><code>curl &quot;http://localhost:8080/?count=8&amp;offset=10&quot; | jq</code></p>
<p>Expected result sources: <code>2 3 1 1 1 2 1 1</code> given <a href="config.go#L39">default config</a></p>
</div>
      </div>
    </div>
  </div>
</section>





<footer class="bg-dark footer-section">
  <div class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <h5 class="text-light">Email</h5>
          <p class="text-white paragraph-lg font-secondary">contact@noel.engineer</p>
        </div>
        <div class="col-md-4">
          <h5 class="text-light">Phone</h5>
          <p class="text-white paragraph-lg font-secondary">&#43;34 722 122 274</p>
        </div>
        <div class="col-md-4">
          <h5 class="text-light">Address</h5>
          <p class="text-white paragraph-lg font-secondary">127.0.0.1, Mallorca</p>
        </div>
      </div>
    </div>
  </div>
  <div class="border-top text-center border-dark py-5">
    <p class="mb-0 text-light">Developed with &lt;3 by NoÃ«l Ruault</p>
    <p class="mb-0 text-light">Copyright Â© 2022 a <a href="https://github.com/themefisher/kross-hugo/blob/master/LICENSE">MIT</a> theme by <a href="https://gohugo.io">HUGO</a></p>
  </div>
</footer>


<!-- Google Map API -->


<!-- JS Plugins -->

<script src="https://noel.engineer/plugins/jQuery/jquery.min.js"></script>

<script src="https://noel.engineer/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://noel.engineer/plugins/slick/slick.min.js"></script>

<script src="https://noel.engineer/plugins/shuffle/shuffle.min.js"></script>

<script src="https://noel.engineer/plugins/google-map/map.js"></script>


<!-- Main Script -->

<script src="https://noel.engineer/js/script.min.js"></script>




  

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
  <div id="js-cookie-box" class="cookie-box-hide cookie-box cookies-banner">
    <div class="cookies-banner__body">
      <div class="mb-3">
        <br> This site uses cookies.
      </div>

      <div class="mb-3">
        <div class="cookies-banner__pre">
          <div class="cookies-banner__pre-inner">
            By continuing to use this website, you agree to their use.
            <br><br>

            <div class="cookies-banner__link">
              <a id="js-cookie-yes-button" class="cookies-banner__choice-link">
                [<b>Y</b>]es, I agree
              </a>
            </div>
          </div>
        </div>

        <div id="js-close-cookie-button" class="cookies-banner__close-button">[X]</div>
      </div>
    </div>
  </div>

  <script>
    (function ($) {
      const cookieBox = document.getElementById('js-cookie-box');
      const cookieButton = document.getElementById('js-close-cookie-button');
      const cookieYesButton = document.getElementById('js-cookie-yes-button');

      if (!Cookies.get('cookie-box')) {
        cookieBox.classList.remove('cookie-box-hide');
        cookieButton.onclick = function () {
          Cookies.set('cookie-box', true, {
            expires:  1 
          });
          cookieBox.classList.add('cookie-box-hide');
        };
        cookieYesButton.onclick = function () {
            Cookies.set('cookie-box', true, {
              expires:  1 
          });
          cookieBox.classList.add('cookie-box-hide');
        };
      }
    }) (jQuery);
  </script>

  
  


</body>

</html>